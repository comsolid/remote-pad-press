!function(e){function t(){this.popup=null,this.isPopup=e.opener,this.setupDone()&&(e.addEventListener("message",this.onMessage_.bind(this),!1),e.addEventListener("beforeunload",function(e){this.popup&&this.popup.close()}.bind(this),!1))}var o=location.protocol+"//"+location.host;t.PRESENTER_MODE_PARAM="presentme",t.prototype.setupDone=function(){for(var o,n=location.search.substring(1).split("&").map(function(e){return e.split("=")}),i=null,s=0;o=n[s];++s)if(o[0].toLowerCase()==t.PRESENTER_MODE_PARAM){i="true"==o[1];break}if(null!==i){if(localStorage.ENABLE_PRESENTOR_MODE=i,!e.history.replaceState)return location.replace(location.pathname),!1;e.history.replaceState({},"",location.pathname)}var a=localStorage.getItem("ENABLE_PRESENTOR_MODE");if(a&&JSON.parse(a)&&!this.isPopup){var r="menubar=no,location=yes,resizable=yes,scrollbars=no,status=no";this.popup=e.open(location.href,"mywindow",r),this.popup.addEventListener("load",function(e){var t=this.popup.document.createEvent("Event");t.initEvent("keydown",!0,!0),t.keyCode="P".charCodeAt(0),this.popup.document.dispatchEvent(t)}.bind(this),!1)}return!0},t.prototype.onMessage_=function(e){var t=e.data;if(e.origin!=o&&0!=o.indexOf("file://"))return void alert("Someone tried to postMessage from an unknown origin");if("keyCode"in t){var n=document.createEvent("Event");n.initEvent("keydown",!0,!0),n.keyCode=t.keyCode,document.dispatchEvent(n)}},t.prototype.sendMsg=function(t){this.isPopup&&e.opener.postMessage(t,"*")},e.SlideController=t}(window);