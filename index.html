<!--
Google IO 2012 HTML5 Slide Template

Authors: Eric Bidelman <ebidel@gmail.com>
         Luke Mahe <lukem@google.com>

URL: https://code.google.com/p/io-2012-slides
-->
<!DOCTYPE html>
<html>

<head>
    <title>Google IO 2012</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">-->
    <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
    <!--This one seems to work all the time, but really small on ipad-->
    <!--<meta name="viewport" content="initial-scale=0.4">-->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="stylesheet" href="css/styles.min.css">
    <link rel="stylesheet" href="css/phone.min.css" media="only screen and (max-device-width: 480px)">
    <!-- This amazingness opens all links in a new tab. -->
    <base target="_blank">
    <script data-main="js/slides" src="js/require-1.0.8.min.js"></script>
</head>

<body style="opacity: 0">

    <slides class="layout-widescreen">

        <slide class="logoslide nobackground">
            <article class="flexbox vcenter">
                <span>
                    <img src="img/banner.png">
                </span>
            </article>
        </slide>

        <slide class="title-slide segue nobackground">
            <aside class="gdbar">
                <img src="img/logo.png">
            </aside>
            <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
            <hgroup class="auto-fadein">
                <h1 data-config-title>
                    <!-- populated from slide_config.json -->
                </h1>
                <h2 data-config-subtitle>
                    <!-- populated from slide_config.json -->
                </h2>
                <p data-config-presenter>
                    <!-- populated from slide_config.json -->
                </p>
            </hgroup>
        </slide>

        
        <slide  >
            
            <hgroup>
                
                <h2>Remote Pad</h2>
                
                
            </hgroup>
            <article ><p>Imagine poder controlar um jogo em seu computador usando seu smartphone
como gamepad?</p>
<p><img alt="racepad" src="img/racepad-page.png" style="width: 70%" class="center" /></p></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Remote Pad - Ideia</h2>
                
                
            </hgroup>
            <article ><p><img alt="architecture" src="img/architecture.png" style="width: 70%" class="center" /></p></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Agenda</h2>
                
                
            </hgroup>
            <article ><ul>
<li><strong>html5</strong> - events, hardware access</li>
<li><strong>nodejs</strong> - event driven, assynchronous I/O</li>
<li><strong>mqtt</strong> - real time communication</li>
<li><strong>robotjs</strong> - envios de tecla através de software</li>
<li><strong>vuejs</strong> - unobtrusive reactivity system</li>
</ul></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                
            </hgroup>
            <article class="flexbox vcenter" ><p><img alt="html5" src="img/html5.png" /></p></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Device Orientation Events</h2>
                
                
            </hgroup>
            <article ><p>Eventos no DOM para obter informações sobre a orientação e movimentação
física do dispositivo móvel.</p>
<ul>
<li>Giroscópio</li>
<li>Acelerômetro</li>
<li>Compasso</li>
</ul></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Device Orientation Events</h2>
                
                
            </hgroup>
            <article ><p><img alt="device-events" src="img/device-alpha-beta-gamma.png" style="width: 90%" class="center" /></p>

<p>Eventos:</p>
<ul>
<li><code>deviceorientation</code></li>
<li><code>devicemotion</code> &#10003;</li>
<li><code>compassneedscalibration</code></li>
</ul></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>DeviceMotion suporte</h2>
                
                
            </hgroup>
            <article ><p><img alt="caniuse-devicemotion" src="img/caniuse-devicemotion.png" /></p>
<p><a href="http://caniuse.com/#feat=deviceorientation">http://caniuse.com/#feat=deviceorientation</a></p></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Touch Events suporte</h2>
                
                
            </hgroup>
            <article ><p><img alt="caniuse-touchevents" src="img/caniuse-touchevents.png" /></p>
<p><a href="http://caniuse.com/#feat=touch">http://caniuse.com/#feat=touch</a></p></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Outras APIs</h2>
                
                
            </hgroup>
            <article ><ul>
<li>Ambient Light API</li>
<li>Geolocation API</li>
<li>Battery Status API</li>
<li>getUserMedia API</li>
<li>Vibration API</li>
<li>Web Notification API</li>
<li>Web Speech API</li>
</ul></article>
            
        </slide>
        
        <slide class="segue nobackground fill"  style="background-image: url(img/nodejs-segue.png)" >
            
            <aside class="gdbar">
                <img src="img/logo.png">
            </aside>
            <hgroup class="auto-fadein">
                
                
            </hgroup>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>NodeJS</h2>
                
                
            </hgroup>
            <article ><p>NodeJS usa um modelo orientado a eventos, com E/S não bloqueante que o torna
leve e eficiente.</p>
<p>Como o Javascript é restrito ao browser foi necessário criar outros
módulos como:</p>
<ul>
<li>Buffer</li>
<li>Child Process</li>
<li>File System</li>
<li>OS</li>
<li>Stream, etc.</li>
</ul></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>NodeJS</h2>
                
                
            </hgroup>
            <article ><p>Node é projetado para construir aplicações escaláveis de rede. A seguir um exemplo
de servidor que pode atender a várias conexões concorrentemente:</p>
<pre class="prettyprint" data-lang="js">
const http = require('http')

const hostname = '127.0.0.1'
const port = 3000

const server = http.createServer((req, res) => {
  res.statusCode = 200
  res.setHeader('Content-Type', 'text/plain')
  res.end('Hello World\n')
})

server.listen(port, hostname, () => {
  console.log(`Server running at http://${hostname}:${port}/`)
})
</pre></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Benchmark</h2>
                
                
            </hgroup>
            <article class="flexbox vcenter" ><p><code>$ pm2 start index.js</code></p>
<p><img alt="nodejs-server" src="img/nodejs-pm2-monit.png" /></p></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Benchmark</h2>
                
                
            </hgroup>
            <article class="flexbox vcenter" ><p><code>$ locust --host=http://localhost:3003</code></p>
<p><img alt="locustio" src="img/locust-nodejs-1000users.png" /></p></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>NodeJS Event Loop</h2>
                
                
            </hgroup>
            <article class="flexbox vcenter" ><p><img alt="threading_node" src="img/threading_node.png" /></p></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>NodeJS Event Loop</h2>
                
                
            </hgroup>
            <article ><p>Visualizing the javascript runtime at runtime</p>
<p><a href="http://latentflip.com/loupe">http://latentflip.com/loupe</a></p></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                
            </hgroup>
            <article class="flexbox vcenter" ><p><img alt="robotjs" src="img/robotjs.png" /></p></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>RobotJS</h2>
                
                
                <h3>Exemplo</h3>
                
            </hgroup>
            <article ><pre class="prettyprint" data-lang="js">
var robot = require('robotjs')

// Press enter.
robot.keyTap('enter')

// hold the shift key
robot.keyToggle('shift', 'down')
</pre></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>RobotJS</h2>
                
                
            </hgroup>
            <article ><p>Usa <code>node-gyp</code> ou Node.js native addon build tool</p>
<p>Ferramenta de linha de comando multi plataforma escrita em NodeJS para
compilação de módulos nativos (C/C++) para NodeJS</p>
<p>Requisição de teclas do teclado é escrita em C/C++ e há um <em>binding</em>
para NodeJS</p></article>
            
        </slide>
        
        <slide class="segue nobackground fill"  style="background-image: url(img/mqttorg-segue.png)" >
            
            <aside class="gdbar">
                <img src="img/logo.png">
            </aside>
            <hgroup class="auto-fadein">
                
                
            </hgroup>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>MQTT</h2>
                
                
                <h3>Message Queue Telemetry Transport</h3>
                
            </hgroup>
            <article ><p>É um protocolo de mensagens baseado em <strong>publish</strong>/<strong>subscribe</strong>, extremamente
simples e leve, projetado para redes com pouca banda, alta latência ou não
confiáveis.</p>
<p>Princípios: minimizar o uso da banda de rede e recursos do dispositivo enquanto
tenta maximinizar a confiabilidade e oferecer algum grau de garantia de entrega das
mensagens.</p>
<p>Também usado nos chamados <strong>M2M</strong> (Machine-to-machine) ou <strong>Internet of Things</strong></p></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Quality of service</h2>
                
                
            </hgroup>
            <article class="flexbox vcenter" ><p><img alt="mqtt-qos" src="img/mqtt-qos.jpg" /></p></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Mosca</h2>
                
                
                <h3>MQTT broker as a module</h3>
                
            </hgroup>
            <article ><pre class="prettyprint" data-lang="js">
var mosca = require('mosca')
var settings = {
    port: 1883
}
var server = new mosca.Server(settings)
server.on('published', function(packet, client) {
    console.log('Published', packet.topic, packet.payload)
})
server.on('ready', function setup() {
    console.log('Mosca server is up and running')
})
</pre></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Mosca</h2>
                
                
                <h3>Exemplo Cliente</h3>
                
            </hgroup>
            <article ><pre class="prettyprint" data-lang="js">
var mqtt = require('mqtt')
var client = mqtt.connect('mqtt://localhost:1883')

client.on('connect', function() {
    client.subscribe('presence')
    client.publish('presence', 'Hello mqtt')
})

client.on('message', function(topic, message) {
    // message is Buffer
    console.log(message.toString())
    client.end()
})
</pre></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>MQTT no browser</h2>
                
                
            </hgroup>
            <article ><p>Utiliza WebSockets para a conexão</p>
<div>
    <input id="mqtt_message"/>
    <button id="mqtt_send">Send</button>
    <button id="mqtt_close">Close</button>
    <div id="mqtt_result" style="margin-bottom: 100px;"></div>
</div>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API">https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API</a></p></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>MQTT no browser</h2>
                
                
            </hgroup>
            <article ><pre class="prettyprint" data-lang="js">
var btnSend = document.getElementById('mqtt_send')
var message = document.getElementById('mqtt_message')
var result = document.getElementById('mqtt_result')
var client = mqtt.connect('ws://test.mosquitto.org:8080/mqtt')
client.subscribe('mqtt/demo')

client.on('message', function(topic, payload) {
    result.innerHTML = [topic, payload].join(': ')
})

btnSend.onclick = function (e) {
    e.preventDefault()
    client.publish('mqtt/demo', message.value)
}
</pre>

<p><a href="https://github.com/mqttjs/MQTT.js#browser">https://github.com/mqttjs/MQTT.js#browser</a></p></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>WebSockets suporte</h2>
                
                
            </hgroup>
            <article ><p><img alt="caniuse-websockets" src="img/caniuse-websockets.png" /></p>
<p><a href="http://caniuse.com/#feat=websockets">http://caniuse.com/#feat=websockets</a></p></article>
            
        </slide>
        
        <slide class="segue nobackground fill"  style="background-image: url(img/vuejs-logo.jpg)" >
            
            <aside class="gdbar">
                <img src="img/logo.png">
            </aside>
            <hgroup class="auto-fadein">
                
                
            </hgroup>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>VueJS</h2>
                
                
            </hgroup>
            <article ><p><strong>Progressive Framework</strong> para construção de interfaces de usuário</p>
<p><img alt="vuejs-render" src="img/vue-render.png" style="width: 75%" class="center" /></p></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Reactive System</h2>
                
                
            </hgroup>
            <article ><p>Trecho para inicialização da variável que indica mudanças no eixo <strong>Y</strong>:</p>
<pre class="prettyprint" data-lang="js">
export default {
    data () {
        <b>acceleration: {
            y: 0
        }</b>
    },
    mounted () {
        if (window.DeviceMotionEvent !== undefined) {
            window.ondevicemotion = (e) => {
                <b>this.acceleration.y = e.accelerationIncludingGravity.y || 0</b>
            }
        }
    }
}
</pre></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Reactive System</h2>
                
                
            </hgroup>
            <article ><p>Trecho para indicar que o usuário está virando para a esquerda ou direita:</p>
<pre class="prettyprint" data-lang="js">
export default {
    computed: {
        isTurningLeft () {
            const { accelerationSensibility } = this.$store.state
            this.keypress.left =
                <b>this.acceleration.y < accelerationSensibility * -1</b>
            return this.keypress.left
        },
        isTurningRight () {
            const { accelerationSensibility } = this.$store.state
            this.keypress.right =
                <b>this.acceleration.y > accelerationSensibility</b>
            return this.keypress.right
        }
    }
}
</pre></article>
            
        </slide>
        
        <slide class="segue nobackground fill"  style="background-image: url(img/remote-pad-gui-services.png)" >
            
            <aside class="gdbar">
                <img src="img/logo.png">
            </aside>
            <hgroup class="auto-fadein">
                
                <h2>Remote Pad</h2>
                
                
            </hgroup>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Remote Pad</h2>
                
                
            </hgroup>
            <article ><p>Cliente: <a href="https://github.com/comsolid/remote-pad">https://github.com/comsolid/remote-pad</a></p>
<p>Servidor: <a href="https://github.com/comsolid/remote-pad-server">https://github.com/comsolid/remote-pad-server</a></p>
<p>GUI (Interface Gráfica): <a href="https://github.com/comsolid/remote-pad-gui">https://github.com/comsolid/remote-pad-gui</a></p></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Remote Pad</h2>
                
                
                <h3>Protocolo de envio de comandos - Cliente</h3>
                
            </hgroup>
            <article ><pre class="prettyprint" data-lang="json">
{
    "keypress": {
      "Y": false,
      "X": false,
      "B": false,
      "A": false,
      "left": false,
      "right": false,
      "up": false,
      "down": false
    }
}
</pre></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Remote Pad</h2>
                
                
                <h3>Protocolo de envio de comandos - Servidor</h3>
                
            </hgroup>
            <article ><p>Alice</p>
<pre class="prettyprint" data-lang="json">
{
    "left": "left",
    "right": "right",
    "up": "up",
    "down": "down",
    "B": "shift",
    "A": "z",
    "Y": "control",
    "X": "space"
}
</pre></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Remote Pad</h2>
                
                
                <h3>Servidor</h3>
                
            </hgroup>
            <article ><pre class="prettyprint" data-lang="js">
const topics = ['alice', 'bob', 'carol', 'david']

server.on('published', function(packet, client) {
    const [ type, player ] = packet.topic.split('/')
    if (type.lastIndexOf('pad', 0) == 0) {
        const commands = JSON.parse(packet.payload.toString())
        <b>pad(commands, clients[player])</b>
    }
})
</pre></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Remote Pad</h2>
                
                
                <h3>Servidor</h3>
                
            </hgroup>
            <article ><pre class="prettyprint" data-lang="js">
var <b>robot</b> = require('robotjs')

module.exports = function (commands, player) {
    for (let prop in commands) {
        let key = player.keys[prop]
        if (key) {
            let toggle = (<b>commands[prop]</b> ? 'down' : 'up')
            <b>robot.keyToggle(player.keys[prop], toggle)</b>
        }
    }
}
</pre></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Remote Pad</h2>
                
                
            </hgroup>
            <article ><p><img alt="architecture" src="img/architecture.png" style="width: 70%" class="center" /></p></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Remote Pad</h2>
                
                
            </hgroup>
            <article ><p><img alt="race-pad" src="img/racepad-page.png" style="width: 50%" class="center" /></p>

<p><img alt="directional-pad" src="img/directional-pad-page.png" style="width: 50%" class="center" /></p></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Referências</h2>
                
                
            </hgroup>
            <article ><ul>
<li>HTML5<ul>
<li><a href="http://www.girliemac.com/presentation-slides/html5-mobile-approach/deviceAPIs.html">http://www.girliemac.com/presentation-slides/html5-mobile-approach/deviceAPIs.html</a></li>
<li><a href="https://github.com/AurelioDeRosa/HTML5-API-demos">https://github.com/AurelioDeRosa/HTML5-API-demos</a></li>
</ul>
</li>
<li>NodeJS<ul>
<li><a href="https://strongloop.com/strongblog/node-js-event-loop/">https://strongloop.com/strongblog/node-js-event-loop/</a></li>
<li><a href="http://latentflip.com/loupe">http://latentflip.com/loupe</a></li>
<li><a href="https://strongloop.com/strongblog/node-js-is-faster-than-java/">https://strongloop.com/strongblog/node-js-is-faster-than-java/</a></li>
</ul>
</li>
<li>Outras Ferramentas<ul>
<li><a href="http://locust.io/">http://locust.io/</a></li>
</ul>
</li>
</ul></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Referências</h2>
                
                
            </hgroup>
            <article ><ul>
<li>MQTT<ul>
<li><a href="http://mqtt.org/faq">http://mqtt.org/faq</a></li>
<li><a href="http://www.ibm.com/developerworks/br/local/websphere/mq_conceitos_melhores_praticas/index1.html">http://www.ibm.com/developerworks/br/local/websphere/mq_conceitos_melhores_praticas/index1.html</a></li>
<li><a href="https://github.com/mcollina/mosca">https://github.com/mcollina/mosca</a></li>
</ul>
</li>
<li>RobotJS<ul>
<li><a href="http://robotjs.io/">http://robotjs.io/</a></li>
<li><a href="https://github.com/nodejs/node-gyp">https://github.com/nodejs/node-gyp</a></li>
</ul>
</li>
</ul></article>
            
        </slide>
        
        <slide  >
            
            <hgroup>
                
                <h2>Referências</h2>
                
                
            </hgroup>
            <article ><ul>
<li>VueJS<ul>
<li><a href="https://vuejs.org/">https://vuejs.org/</a></li>
<li><a href="https://vuejs.org/v2/guide/reactivity.html">https://vuejs.org/v2/guide/reactivity.html</a></li>
</ul>
</li>
<li>Vídeos<ul>
<li><a href="https://www.youtube.com/watch?v=WE7GVIFRV7Q">https://www.youtube.com/watch?v=WE7GVIFRV7Q</a> - Matteo Collina: "MQTT" and "Node.js"- Messaging the Internet of Things</li>
</ul>
</li>
</ul></article>
            
        </slide>
        

        <slide class="thank-you-slide segue nobackground">
            <aside class="gdbar right">
                <img src="img/logo.png">
            </aside>
            <article class="flexbox vleft auto-fadein">
                <h2>&lt;Obrigado pela aten&ccedil;&atilde;o!&gt;</h2>
                <p>Qualquer d&uacute;vida entre em contato.</p>
            </article>
            <p class="auto-fadein" data-config-contact>
                <!-- populated from slide_config.json -->
            </p>
        </slide>

        <!--
        <slide class="logoslide dark nobackground">
            <article class="flexbox vcenter">
                <span><img src="images/google_developers_logo_white.png"></span>
            </article>
        </slide>
        -->

        <slide class="backdrop"></slide>

    </slides>

</body>

</html>